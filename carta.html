<!DOCTYPE html>
<html>

<head>
    <title>Shoping Cart</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" href="css/carta.css">

    <!-- Primary Meta Tags -->
<title>CBIKES - shopping cart (Konstantyn Huzenko)</title>
<meta name="title" content="CBIKES - shopping cart (Konstantyn Huzenko)">
<meta name="description" content="My shopping cart development. Konstantyn Huzenko - Frontend Developer.">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://metatags.io/">
<meta property="og:title" content="CBIKES - shopping cart (Konstantyn Huzenko)">
<meta property="og:description" content="My shopping cart development. Konstantyn Huzenko - Frontend Developer.">
<meta property="og:image" content="i/cbikes-01.jpg">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://metatags.io/">
<meta property="twitter:title" content="CBIKES - shopping cart (Konstantyn Huzenko)">
<meta property="twitter:description" content="My shopping cart development. Konstantyn Huzenko - Frontend Developer.">
<meta property="twitter:image" content="i/cbikes-01.jpg">
</head>

<body>
    <div class="app-container pt-40">

        <div class="top-cart">
            <div class="top-cart__info">
                <div class="top-cart-info__goods"></div>
                <button class="btn-check">Order
                <span class="top-cart-info__item">
                    <span class="red-info">0</span> $</span>
                </button>
            </div>

        </div><!-- /.top-cart -->



        <header class="header">
            <div class="container">
                <h1 class="header__item">Muff Shop</h1>
            </div>
        </header>

        <div class="wrap">
            <section class="container">
                <div class="filter-box">
                    <div class="select-box">
                        <div class="select-control">
                            <input type="radio" name="Category" data-value-category="all" id="radio-all"
                                class="category-control" checked>
                            <label class="radio-control" for="radio-all">All</label><br>
                            <input type="radio" name="Category" data-value-category="road" id="radio-road"
                                class="category-control">
                            <label class="radio-control" for="radio-road">Road</label><br>
                            <input type="radio" name="Category" data-value-category="mountain" id="radio-mountain"
                                class="category-control">
                            <label class="radio-control" for="radio-mountain">Mountain</label><br>
                            <input type="radio" name="Category" data-value-category="bmx" id="radio-bmx"
                                class="category-control">
                            <label class="radio-control" for="radio-bmx">BMX</label><br>
                        </div>

                    </div><!-- /.select-box -->
                    <div class="price-select-box">
                        <input type="range" min="0" max="3870" value="2850" class="price-control" data-filter='price'>
                        <span class="price-value">price to <span class="price-value__item">3870</span>$</span>
                    </div><!-- /.price-select-box -->
                </div><!-- /filter-box-->



                <div class="products-box grid-box">

                    <div data-category='road' value="2850" class="product-box__item">
                        <h3 class="product-box__title">Muffin</h3>
                        <div class="product-box__img">
                            <img class="img-fluid" src="img/cupcake.png">
                        </div>
                        <div class="product-box__meta">
                            <p>5.60</p><button class="product-box__btn">+</button>

                        </div>
                    </div>


                    <div data-category='bmx' value="1620" class="product-box__item">
                        <h3 class="product-box__title">Croissant</h3>
                        <div class="product-box__img">
                            <img class="img-fluid" src="i/im12-min.png">
                        </div>
                        <div class="product-box__meta">
                            <p>1620 $</p><button class="product-box__btn">+</button>

                        </div>
                    </div>

                    <div data-category='mountain' value="780" class="product-box__item">
                        <h3 class="product-box__title">Canyon</h3>
                        <div class="product-box__img">
                            <img class="img-fluid" src="i/im2-min.png">
                        </div>
                        <div class="product-box__meta">
                            <p>780 $</p><button class="product-box__btn">+</button>

                        </div>
                    </div>
                    <div data-category='road' value="1100" class="product-box__item">
                        <h3 class="product-box__title">Coselo</h3>
                        <div class="product-box__img">
                            <img class="img-fluid" src="i/im3-min.png">
                        </div>
                        <div class="product-box__meta">
                            <p>1100 $</p><button class="product-box__btn">+</button>

                        </div>
                    </div>
                    <div data-category='mountain' value="450" class="product-box__item">
                        <h3 class="product-box__title">Gt Cube</h3>
                        <div class="product-box__img">
                            <img class="img-fluid" src="i/im4-min.png">
                        </div>
                        <div class="product-box__meta">
                            <p>450 $</p><button class="product-box__btn">+</button>

                        </div>
                    </div>
                    <div data-category='road' value="600" class="product-box__item">
                        <h3 class="product-box__title">Cube Axeal</h3>
                        <div class="product-box__img">
                            <img class="img-fluid" src="i/im5-min.png">
                        </div>
                        <div class="product-box__meta">
                            <p>600 $</p><button class="product-box__btn">+</button>

                        </div>
                    </div>
                    <div data-category='mountain' value="320" class="product-box__item">
                        <h3 class="product-box__title">Gt 3000</h3>
                        <div class="product-box__img">
                            <img class="img-fluid" src="i/im7-min.png">
                        </div>
                        <div class="product-box__meta">
                            <p>320 $</p><button class="product-box__btn">+</button>

                        </div>
                    </div>
                    <div data-category='mountain' value="500" class="product-box__item">
                        <h3 class="product-box__title">Gt One</h3>
                        <div class="product-box__img">
                            <img class="img-fluid" src="i/im8-min.png">
                        </div>
                        <div class="product-box__meta">
                            <p>500 $</p><button class="product-box__btn">+</button>

                        </div>
                    </div>
                    <div data-category='bmx' value="2200" class="product-box__item">
                        <h3 class="product-box__title">Gt Perfomer</h3>
                        <div class="product-box__img">
                            <img class="img-fluid" src="i/im9-min.png">
                        </div>
                        <div class="product-box__meta">
                            <p>2200 $</p><button class="product-box__btn">+</button>

                        </div>
                    </div>
                    <div data-category='mountain' value="1250" class="product-box__item">
                        <h3 class="product-box__title">Haibike</h3>
                        <div class="product-box__img">
                            <img class="img-fluid" src="i/im10-min.png">
                        </div>
                        <div class="product-box__meta">
                            <p>1250 $</p><button class="product-box__btn">+</button>

                        </div>
                    </div>
                    <div data-category='bmx' value="1350" class="product-box__item">
                        <h3 class="product-box__title">Kenda XL</h3>
                        <div class="product-box__img">
                            <img class="img-fluid" src="i/im11-min.png">
                        </div>
                        <div class="product-box__meta">
                            <p>1350 $</p><button class="product-box__btn">+</button>

                        </div>
                    </div>


                    <div data-category='road' value="1900" class="product-box__item">
                        <h3 class="product-box__title">Forme Long</h3>
                        <div class="product-box__img">
                            <img class="img-fluid" src="i/im6-min.png">
                        </div>
                        <div class="product-box__meta">
                            <p>1900 $</p><button class="product-box__btn">+</button>

                        </div>
                    </div>


                </div><!-- /product-box-->

            </section>
        </div>

        <footer class="bottom-footer bg-beetroot py-1">
            <div class="container">
            </div>
        </footer>
    </div><!-- /.app-container -->

    <script>
        const filter = {
        filterAction() {
            document.querySelectorAll(".product-box__item").forEach((item) => {
            let categoryAtribut = item.getAttribute("data-category");
            let priceAtribut = Number(item.getAttribute("value"));

            if (
                (filter.category() == categoryAtribut || filter.category() == "all") &&
                (filter.price() >= priceAtribut || filter.price() == "0")
            ) {
                item.style.display = "flex";
            } else {
                item.style.display = "none";
            }
            });
        },

        price() {
            let priceValue = document.querySelector(".price-value__item");
            priceValue.innerHTML = document.querySelector("[data-filter]").value;

            return document.querySelector("[data-filter]").value;
        },

        category() {
            let radio = document.querySelectorAll(".category-control");
            for (const item of radio) {
            if (item.checked) {
                return item.getAttribute("data-value-category");
            }
            }
        },

        checkAtributeToggle() {
            document.querySelector(".select-control").addEventListener("click", () => {
            document.querySelectorAll(".category-control").forEach((item) => {
                item.removeAttribute("checked");
            });

            if (event.target.classList == "category-control") {
                event.target.setAttribute("checked", "");
            } else {
                event.stopImmediatePropagation();
            }
            });
        },
        };

        filter.checkAtributeToggle();

        document
        .querySelector(".select-control")
        .addEventListener("click", filter.filterAction);

        document
        .querySelector(".price-control")
        .addEventListener("change", filter.filterAction);

        const cart = {
        add() {
            let div = document.querySelector(".top-cart-info__goods");
            let element = event.target.parentNode.parentNode.cloneNode("true");
            let elementAnimation = event.target.parentNode.parentNode;
            elementAnimation.classList.add("animation");

            element.classList = "product-box__item--small";
            element.removeAttribute("style");
            element.querySelector(".product-box__btn").innerHTML = "X";
            element.querySelector(".product-box__btn").classList =
            "product-box__btn--delete";

            document.querySelector(".top-cart").style.bottom = 0 + "px";
            div.appendChild(element);
            cart.price();

            setTimeout(() => {
            elementAnimation.classList.remove("animation");
            }, 1000);
        },

        delete() {
            if (event.target.classList == "product-box__btn--delete") {
            let mainElement = event.target.parentNode.parentNode
            mainElement.classList.add('delete')
            setTimeout(() => {
                mainElement.remove();
                cart.price();
            }, 900);
            }
        },

        price() {
            let priceValue = 0;
            document.querySelectorAll(".product-box__item--small").forEach((item) => {
            priceValue += Number(item.getAttribute("value"));
            });
            document.querySelector(".red-info").innerHTML = priceValue;

            if (priceValue === 0) {
            document.querySelector(".top-cart").style.bottom = -120 + "px";
            }
        },
        };

        document
        .querySelectorAll(".product-box__btn")
        .forEach((item) => item.addEventListener("click", cart.add));

        document
        .querySelector(".top-cart-info__goods")
        .addEventListener("click", cart.delete);
    </script>

    <script src="js/filter.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/test.js"></script>
</body>

</html>
